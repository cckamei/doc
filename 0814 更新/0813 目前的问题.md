### 商城账户的注册与登录

**一、注册的定义？**

```
　　用户在商城主动创建一个新账户时，系统通过该用户提交的手机号在ERP中检索：

　　如该手机号已经在ERP中存在档案，则拉取该用户的客户信息（通过 GetVIP3 接口拉取）。
　　如该手机号在ERP中不存在，则提交该用户的客户信息至ERP（通过 CreVIP 接口提交）。
	· 提交的内容：手机、姓名、性别、出生年月日、店代码
	· 提交时，设置pTYPE=C；后续用户修改这些项后，使用CreVIP接口进行更新，此时设置pTYPE=U。

　　综上，即，商城账户应与ERP会员档案保持双向更新，只不过并不是所有内容都在商城本地要求用户填写，未要求填写的部分接口传为0或空。
```

二、Q&A

```
1. CreVIP要求填写，但注册时没有要求填写的内容：会员省市区、详细地址、邮编、信息来源、Email、是否绑定官微
处理办法：本期不管

2. 注册时要求填写的珠宝顾问姓名在CreVIP里不存在传递的接口
处理办法：这个在另一个没有被开放的内网接口里，本期先不管

3. 注册时要求填写的圈号、手寸、生日等在CreVIP里不存在传递的接口
处理办法：商城本地储存，本期不做传输

4. 是否拉取购物记录？
处理办法：本期只传递新的购物记录（即通过CreBZD创建销售单），不从ERP中拉取旧的购物记录。

5. 其他要注意的点？
在ERP中创建会员档案成功后，会分配一个pVIPKH（VIP卡号）给该用户的ERP档案，需要将该卡号拉取到商城本地存储。该VIP卡号会在用户的个人中心呈现。
```



### 商品的管理与订单的形成

一、购物需要注意哪些方面？

```
　　用户在商城主动发起一个购物请求，商城据此创建一个订单，并通过接口在ERP中创建一个该订单的映射（被称为“销售单”）。至此，我们认为这形成了一个完整的订单。
　　
　　库管会根据销售单得到的信息给用户发货，客服会在得知发货后（人工处理），到商城后台填写单号并确认发货，由此改变用户端展示的订单所处节点（已发货）。
　　
　　用户在整个订单形成后，关注订单状态的切换，以及物流信息的更新。期间可能牵扯取消订单、或退款。当用户确认收货后，订单被标识为已完成。
```

二、Q&A

```
1. 创建销售单要传递哪些数据？（以下数据名称以“商城系统名称（ERP名称,接口名称）”标识）：

店代码（店代码,pCODE）
VIP卡号（客户编号,pVIPKH）
商品货号（产品编号,pCHANPBHS）
价格（售价,pSHOUJS）
数量（总件数,pZONGJS）

收货人姓名（收货人姓名，pShouHRXM）
收货人地址（收货人地址，pShouHRDZ）
收货人电话（收货人电话，pShouHRDH）

提货方式（提货方式，pTiHFS）：目前没有自提，所以只按照快递传值

是否刻字（是否刻字，pTiHFS）
刻字内容（字印内容，pZiYin）

订单编号（定单ID，pKeHDDID）
```

```
2. 商品编号方式？
处理办法：商品分为两种编号方式，
第一种是商品货号，在后台自定义字符配置管理，采用 1 货 1 号的方式；
第二种是商品编号，在后台自定义字符配置管理，采用 1 SKU 1 号的方式。

3. 商品的属性构成？
商品的描述分为三部分：
(1) 规格信息（SKU）
SKU有2层属性，1是SKU构成参数，这些参数是用户在购物时可以选择的；
2是SKU补充参数，这些参数只作展示用。
(2) 描述信息
包括商品标题、商品图片、图文描述三个方面。
(3) 编制信息
展示商品的其他信息，如是否新款/商城同款/活动中等。

4. 商品奖励？
分为两部分：1是积分，这个面向一般顾客；2是提成，这个面向店员。

积分的处理：每次创建销售单后，ERP根据销售单来处理用户在ERP中的积分，并实时更新。商城通过GetVIP3获取最新积分。

提成的处理：每一个商品允许配置一个提成比例，由员工分享出去的商品链接，如果产生销售，给该员工计1次提成。这个提成数据存在商城本地，通过一个报表呈现。不需要回传给ERP。
```

```
5. 商品搜索？
商城的搜索功能基于商品的套系，款式，以及价格这三个属性。
暂不需要支持按名称搜索功能。

6. 首页展位？
商品的套系需要允许用户设置 1 张封面图，该封面图将被引用于首页。
```



### ＣＭＳ

```
本期希望能写一个简单的CMS系统，可以只允许设置封面、外链、以及展位类型。
　　外链：添加一个微信文章的外链在这里，能打开即可，不必在意跳出商城框架的体验不好等问题。
　　类型：标记该文章在首页的展位类型
		1. 首页顶部轮播（全局最多允许设置3篇）
		2. 首页插入条幅（全局最多允许设置1篇）
　　封面：允许用户设置封面图，这个封面会在首页有2个展位使用。
		1. 首页顶部轮播：最佳分辨率 675 x 1080
		2. 首页插入条幅：最佳分辨率 180 x 1080
```



### 终端

```
大区下辖门店和仓库，门店和仓库彼此之间独立。
终端的数据会在部分其他功能中引用，如商品详情页中显示发货地，以及在预约表单中选择预约门店。
```



### 客服

```
客服分为两部分
　　1. 在线客服：使用微信的客服功能（https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1464937269_mUtmK），或者接入一个第三方的在线客服系统。

　　2. 预约系统：
　　系统提供两个类型的表单：1是预约线下体验，2是以旧换新。两个表单内容基本一致。
　　预约需要客服在管理后台审核，将预约单标识为“待处理，已处理未完成，已结单”三者之一。
　　提出预约的用户在商城用户中心能看到已提交的预约单。
```



### 营销

```
营销分为两部分
　　1. 活动系统：先不做了
　　2. 优惠券系统：这期先做个抵扣券就可以，具体形式就是满减。用户能自定义一个满减券，然后勾选适配哪些商品。这些商品的详情页里会有优惠券领取的入口，点击领取，不点不领。领取后在结算时可以选择使用。
　　2. 提成系统：每一个商品允许配置一个提成比例，由员工分享出去的商品链接，如果产生销售，给该员工计1次提成。这个提成数据存在商城本地，通过一个报表呈现。不需要回传给ERP。
```

