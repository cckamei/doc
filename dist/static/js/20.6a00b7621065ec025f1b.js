webpackJsonp([20],{"5bqY":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i("Dd8w"),s=i.n(c),n=i("NYxO"),a=i("LEG2"),l=i.n(a),r={data:function(){return{checkedAll:!1,totalCount:0,totalMoney:0,skuVisible:!1,skuIndex:0,res:{cart:[],recommend:[{url:l.a,name:"文承 戒指",price:"6666",like:!1},{url:l.a,name:"文承 戒指",price:"6666",like:!1},{url:l.a,name:"文承 戒指",price:"6666",like:!1},{url:l.a,name:"文承 戒指",price:"6666",like:!1}]}}},created:function(){this.fetchCart()},watch:{"res.cart":{handler:function(t){this.checkedAll=!this.res.cart.filter(function(t){return t.limit&&!t.checked}).length,this.totalCount=this.res.cart.filter(function(t){return t.limit&&t.checked}).reduce(function(t,e){return t+e.count},0),this.totalMoney=this.res.cart.filter(function(t){return t.limit&&t.checked}).reduce(function(t,e){return t+e.price*e.count},0)},deep:!0}},methods:s()({},Object(n.b)(["ajax"]),{fetchCart:function(){var t=this;this.ajax({name:"cart"}).then(function(e){e.forEach(function(t){t.checked=!1,t.deleteVisible=!1,t.limit=999}),t.res.cart=e})},checkAll:function(){var t=this.checkedAll;this.res.cart.filter(function(t){return t.limit}).forEach(function(e){e.checked=!t})},handlePress:function(t,e,i){"press"===t&&(this.res.cart[i.index].deleteVisible=!0)},addCart:function(t){this.cardHandle(t.cart_id,1,function(){t.count++})},minusCart:function(t){this.cardHandle(t.cart_id,-1,function(){t.count--})},removeCart:function(t,e){var i=this;this.cardHandle(t.cart_id,-t.count,function(){i.res.cart.splice(e,1)})},cardHandle:function(t,e,i){this.ajax({name:"addCart",data:{cart_id:t,num:e}}).then(function(t){i()})},handleSKU:function(){},settlement:function(){this.$router.push({name:"confirmorder"})}})},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pt pb"},[i("v-header",[t._v("购物车")]),t._v(" "),i("div",{staticClass:"content"},[i("ul",{staticClass:"cart-list"},t._l(t.res.cart,function(e,c){return i("li",{directives:[{name:"touch",rawName:"v-touch.press",value:t.handlePress,expression:"handlePress",modifiers:{press:!0}}],staticClass:"flex",attrs:{"data-index":c}},[i("div",{staticClass:"checkbox",class:{active:e.checked,disabled:!e.limit},on:{click:function(t){e.limit&&(e.checked=!e.checked)}}}),t._v(" "),i("div",{staticClass:"img"},[i("img",{attrs:{src:e.img,alt:""}})]),t._v(" "),i("div",{staticClass:"detail flex-auto flex"},[i("span",{staticClass:"name"},[t._v(t._s(e.goods_title))]),t._v(" "),i("span",{staticClass:"desc"},[t._v(t._s(e.sub_title))]),t._v(" "),e.limit?[i("div",{staticClass:"line3"},[i("span",{staticClass:"price"},[i("span",[t._v("￥")]),t._v(t._s(t._f("currency")(e.price)))]),t._v(" "),i("div",{staticClass:"add-minus flex"},[i("div",{staticClass:"btn minus",class:{active:e.count>1},on:{click:function(i){e.count>1&&t.minusCart(e)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.count,expression:"item.count"}],attrs:{type:"text",readonly:""},domProps:{value:e.count},on:{input:function(i){i.target.composing||t.$set(e,"count",i.target.value)}}}),t._v(" "),i("div",{staticClass:"btn plus",class:{active:e.count<e.limit},on:{click:function(i){e.count<e.limit&&t.addCart(e)}}})])])]:[i("div",{staticClass:"line3 flex"},[i("span",{staticClass:"note"},[t._v("所选规格暂时无货")]),t._v(" "),i("button",{staticClass:"rechoose btn",on:{click:function(e){t.skuVisible=!0,t.skuIndex=c}}},[t._v("重选")])])]],2),t._v(" "),e.deleteVisible?i("div",{staticClass:"mask-delete flex",on:{click:function(t){e.deleteVisible=!1}}},[i("div",{staticClass:"delete",on:{click:function(i){t.removeCart(e,c)}}},[t._v("删除")])]):t._e()])})),t._v(" "),i("v-recommend",{attrs:{title:"为你推荐",list:t.res.recommend}})],1),t._v(" "),i("div",{staticClass:"footer flex"},[i("div",{staticClass:"checkbox",class:{active:t.checkedAll},on:{click:t.checkAll}}),t._v(" "),i("span",{staticClass:"checkbox-label"},[t._v("全选")]),t._v(" "),i("span",{staticClass:"total-label"},[t._v("合计：")]),t._v(" "),i("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("currency")(t.totalMoney)))]),t._v(" "),i("button",{staticClass:"btn settlement",on:{click:t.settlement}},[t._v("结算"+t._s(t.totalCount))])])],1)},staticRenderFns:[]};var u=i("VU/8")(r,o,!1,function(t){i("kpnC")},"data-v-5c2b9e75",null);e.default=u.exports},kpnC:function(t,e){}});
//# sourceMappingURL=20.6a00b7621065ec025f1b.js.map